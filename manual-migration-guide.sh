#!/bin/bash

# Manual Migration Guide for Out Sports QC
# Since Supabase CLI requires special setup, here are manual steps

echo "üìã MANUAL MIGRATION GUIDE - Out Sports QC"
echo "=========================================="
echo ""
echo "Since automatic migration isn't available, please follow these manual steps:"
echo ""

echo "üéØ STEP 1: Website Feedback Table"
echo "--------------------------------"
echo "Purpose: Stores user bug reports and suggestions"
echo ""
echo "üëâ Instructions:"
echo "1. Open your Supabase dashboard: https://supabase.com/dashboard"
echo "2. Navigate to: SQL Editor"
echo "3. Copy and paste the contents of: supabase/migrations/create_website_feedback_table.sql"
echo "4. Click 'Run' to execute the SQL"
echo ""

echo "üéØ STEP 2: Registration Details Table"
echo "------------------------------------"
echo "Purpose: Admin-configurable registration form fields (the 6 boxes at top of registration form)"
echo ""
echo "üëâ Instructions:"
echo "1. In the same SQL Editor"
echo "2. Copy and paste the contents of: supabase/migrations/20250730_add_registration_details.sql"
echo "3. Click 'Run' to execute the SQL"
echo ""

echo "üéØ STEP 3: Fix Locations Table"
echo "------------------------------"
echo "Purpose: Fixes locations table for admin location management"
echo ""
echo "ÔøΩ Instructions:"
echo "1. In the same SQL Editor"
echo "2. Copy and paste the contents of: supabase/migrations/fix_locations_table.sql"
echo "3. Click 'Run' to execute the SQL"
echo ""

echo "ÔøΩüìÅ FILE LOCATIONS:"
echo "=================="
echo "File 1: $(pwd)/supabase/migrations/create_website_feedback_table.sql"
echo "File 2: $(pwd)/supabase/migrations/20250730_add_registration_details.sql"
echo "File 3: $(pwd)/supabase/migrations/fix_locations_table.sql"
echo ""

echo "‚úÖ WHAT YOU'LL GET AFTER RUNNING THESE:"
echo "======================================="
echo ""
echo "üîß New Admin Dashboard Features:"
echo "  ‚Ä¢ Website Feedback section - View/manage user bug reports (improved priority and delete styling)"
echo "  ‚Ä¢ Registration Details editor - Configure the 6 info boxes on registration form"
echo "  ‚Ä¢ Location Management - Create/edit game locations (city, state, zip now save properly)"
echo "  ‚Ä¢ Games table - Added Season, Year, and Sport columns for better organization"
echo "  ‚Ä¢ Games archiving - New 'Archived' status for inactive season games"
echo "  ‚Ä¢ Fixed Active checkbox issue - Checkboxes now work properly for reactivating items"
echo "  ‚Ä¢ Sports Management - Create/edit sports with Season/Year organization (Add New Sport button now works)"
echo "  ‚Ä¢ Auto-Generated Titles - Sports titles now auto-generate as '[Season] [Year] [Sport] League'"
echo "  ‚Ä¢ Auto-Generated Roster Paths - Teams routes auto-generate as '#[season]-[year]-[sport]-teams'"
echo "  ‚Ä¢ Removed Roster Path Input - No manual roster path entry needed, it's automatic"
echo "  ‚Ä¢ Year validation - New sports: min current year (2025), Edit sports: min 2025 (league start)"
echo "  ‚Ä¢ Smart Game Creation - Sport dropdown shows only Active/Coming Soon sports with season/year info"
echo ""
echo "üåê Updated User Experience:"
echo "  ‚Ä¢ Menu: 'General Info' is now 'About Us'"
echo "  ‚Ä¢ Join buttons redirect to '#registration'"
echo "  ‚Ä¢ Menu: 'Give Feedback' is now 'Give Website Feedback'"
echo "  ‚Ä¢ Registration form uses your admin-configured values"
echo "  ‚Ä¢ Website feedback modal prevents page scrolling when open"
echo "  ‚Ä¢ Social media cleaned up - removed Discord and Twitter, kept Facebook and Instagram"
echo "  ‚Ä¢ Dynamic Sports Menu - Menu items automatically generated from admin sports data"
echo "  ‚Ä¢ Smart Sport Navigation - Schedule/Teams links: #[season]-[year]-[sport]-schedule/teams (all lowercase)"
echo "  ‚Ä¢ Homepage Sports Cards - Filtered by Active/Coming Soon, custom sorted, auto-routed to teams page"
echo ""
echo "üó∫Ô∏è  Fixed Map Display:"
echo "  ‚Ä¢ Maps now show only locations stored in database"
echo "  ‚Ä¢ Location city, state, and ZIP code fields save correctly"
echo "  ‚Ä¢ Database locations take priority over static file data"
echo ""

echo "üéØ TESTING YOUR CHANGES:"
echo "========================"
echo "1. After running the SQL migrations:"
echo "2. Visit your admin dashboard"
echo "3. Go to 'Registrations' ‚Üí 'Registration Details' tab"
echo "4. Update the 6 text fields (Sport, Season, Duration, Game Time, Location, Team Size)"
echo "5. Visit the registration page to see your changes"
echo "6. Test 'Website Feedback' section - you can now delete entries"
echo "7. Test 'Locations' section - you can now create/edit game locations"
echo "8. Test 'Sports Info' section - Click 'Add New Sport' to create sports with Season/Year"
echo "9. Notice Display Title and Roster Path are auto-generated (no manual input needed)"
echo "10. Create a new active sport and check the main website menu for dynamic sports dropdown"
echo "11. Test 'Games' section - Sport dropdown now shows only Active/Coming Soon sports"
echo "12. Verify homepage sports cards link to teams pages with lowercase routing"
echo "13. Check navigation menu uses lowercase routing: #[season]-[year]-[sport]-schedule/teams"
echo ""

echo "üìù SQL FILES CONTENT:"
echo "===================="
echo ""
echo "üóÇÔ∏è  File 1 Content (Website Feedback):"
echo "--------------------------------------"
cat "$(pwd)/supabase/migrations/create_website_feedback_table.sql"
echo ""
echo ""
echo "üóÇÔ∏è  File 2 Content (Registration Details):"
echo "------------------------------------------"
cat "$(pwd)/supabase/migrations/20250730_add_registration_details.sql"
echo ""
echo ""
echo "üóÇÔ∏è  File 3 Content (Locations Table Fix):"
echo "-----------------------------------------"
cat "$(pwd)/supabase/migrations/fix_locations_table.sql"
echo ""

echo "‚úÖ SUMMARY: Copy and run all 3 SQL files in your Supabase dashboard's SQL Editor!"
